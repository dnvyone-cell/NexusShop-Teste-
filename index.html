<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Nexus Auto-Publisher</title>
    
    <!-- Dependências Externas -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Firebase SDK Compat -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@400;500;600;700;800&family=Inter:wght@400;500;600;700;800;900&display=swap');
        
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", Roboto, Helvetica, Arial, sans-serif; 
            margin: 0; 
            background-color: #000000; 
            color: white;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            overflow-x: hidden;
        }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        @keyframes springUp { 
            0% { transform: translateY(40px) scale(0.95); opacity: 0; } 
            100% { transform: translateY(0) scale(1); opacity: 1; } 
        }
        
        @keyframes softFade {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }

        .view-animate { animation: softFade 0.5s cubic-bezier(0.25, 1, 0.5, 1) forwards; }
        .animate-spring { animation: springUp 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.1) forwards; }
        
        .onyx-card {
            background-color: #0c0c0e;
            border: 1px solid #1f1f23;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        }

        .btn-fluid { transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1), background-color 0.2s; }
        .btn-fluid:active { transform: scale(0.94); }

        .nexus-input-container { margin-bottom: 20px; width: 100%; text-align: left; position: relative; }
        .nexus-label { display: block; font-size: 10px; font-weight: 800; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 0.05em; margin-left: 12px; color: #71717a; transition: color 0.3s; }
        .nexus-input { 
            width: 100%; border-radius: 20px; padding: 16px 24px; background-color: #1c1c1e; color: white; 
            border: 1px solid transparent; outline: none; font-weight: 600; font-size: 14px; transition: all 0.3s;
        }
        .nexus-input.textarea { border-radius: 24px; min-height: 100px; resize: none; padding: 20px 24px; }
        .nexus-input::placeholder { opacity: 0.3; }
        .nexus-input:focus { border-color: #2563eb; box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1); }
        .nexus-input-container:focus-within .nexus-label { color: white; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef, useEffect } = React;

        // --- FIREBASE CONFIG (Idêntico ao original) ---
        const firebaseConfig = {
            apiKey: "AIzaSyDcWSyP6S7LDuGQ1ZjFqKAHCZ8mjwJhEKY",
            authDomain: "nexus-hub-159db.firebaseapp.com",
            projectId: "nexus-hub-159db",
            storageBucket: "nexus-hub-159db.firebasestorage.app",
            messagingSenderId: "400199878551",
            appId: "1:400199878551:web:4f58353584daffbeb026d2"
        };

        if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        const DB_APP_ID = 'nexus-hub-permanent-vault';
        const ACCENT_COLOR = '#2563eb';

        function Icon({ name, size = 24, className = "" }) {
            const containerRef = useRef(null);
            useEffect(() => {
                if (window.lucide && containerRef.current) {
                    const kebabName = name.replace(/([a-z0-9])([A-Z])/g, '$1-$2').toLowerCase();
                    containerRef.current.innerHTML = `<i data-lucide="${kebabName}"></i>`;
                    window.lucide.createIcons({ root: containerRef.current, attrs: { width: size, height: size, class: className } });
                }
            }, [name, size, className]);
            return <span ref={containerRef} className="flex items-center justify-center pointer-events-none"></span>;
        }

        function InputField({ label, value, onChange, type = "text", placeholder = "", isTextarea = false }) { 
            return (
                <div className="nexus-input-container group">
                    <label className="nexus-label group-focus-within:text-white">{label}</label>
                    {isTextarea ? (
                        <textarea value={value} onChange={(e) => onChange(e.target.value)} placeholder={placeholder} className="nexus-input textarea" style={{ caretColor: ACCENT_COLOR }} />
                    ) : (
                        <input type={type} value={value} onChange={(e) => onChange(e.target.value)} placeholder={placeholder} className="nexus-input" style={{ caretColor: ACCENT_COLOR }} />
                    )}
                </div>
            ); 
        }

        function IOSSwitch({ checked, onChange }) { 
            return (
                <div onClick={() => onChange(!checked)} className={`relative w-[52px] h-[32px] rounded-full transition-all duration-300 cursor-pointer shadow-inner ${checked ? 'bg-blue-600' : 'bg-zinc-800'}`}>
                    <div className={`absolute top-[2px] w-[28px] h-[28px] bg-white rounded-full shadow-lg transition-all duration-300 cubic-bezier(0.34, 1.56, 0.64, 1) ${checked ? 'left-[22px]' : 'left-[2px]'}`}></div>
                </div>
            ); 
        }

        function App() {
            // Agora o Cloud Name voltou a ser uma variável de estado gerenciável pelo usuário
            const [cloudName, setCloudName] = useState(() => localStorage.getItem('nexus_cloud_name') || 'dad93q3f0');
            const [uploadPreset, setUploadPreset] = useState(() => localStorage.getItem('nexus_upload_preset') || '');
            
            // App Data Completo
            const [appData, setAppData] = useState({ 
                name: '', developer: '', category: 'Apps', version: '1.0', platform: 'Mobile', description: '',
                icon: '', screenshots: [], scheduledAt: '', isMod: false, isSecret: false, isHidden: false, isLocked: false 
            });
            
            const [newShotUrl, setNewShotUrl] = useState("");
            const [file, setFile] = useState(null); // APK File
            const [uploading, setUploading] = useState(false);
            const [progress, setProgress] = useState(0);
            const [status, setStatus] = useState({ type: '', message: '' });
            const [isConfigOpen, setIsConfigOpen] = useState(!uploadPreset || !cloudName);

            useEffect(() => {
                auth.signInAnonymously().catch(err => console.error("Firebase Auth Error:", err));
            }, []);

            const handleSaveConfig = () => {
                if(!cloudName || !uploadPreset) {
                    setStatus({ type: 'error', message: 'Preencha o Cloud Name e o Upload Preset!' });
                    return;
                }
                localStorage.setItem('nexus_cloud_name', cloudName);
                localStorage.setItem('nexus_upload_preset', uploadPreset);
                setStatus({ type: 'success', message: 'Configurações do Cloudinary salvas!' });
                setIsConfigOpen(false);
                setTimeout(() => setStatus({ type: '', message: '' }), 3000);
            };

            // Image Upload (Base64) - Ícones e Screenshots
            const handleImageToDataURL = (file, callback) => {
                const reader = new FileReader();
                reader.onloadend = () => callback(reader.result);
                reader.readAsDataURL(file);
            };

            const handleIconUpload = (e) => {
                if (e.target.files[0]) handleImageToDataURL(e.target.files[0], (base64) => setAppData({...appData, icon: base64}));
            };

            const handleScreenshotUpload = (e) => {
                if (e.target.files[0]) {
                    handleImageToDataURL(e.target.files[0], (base64) => {
                        setAppData({...appData, screenshots: [...appData.screenshots, base64]});
                    });
                }
            };

            const addShotUrl = () => {
                if(newShotUrl) { setAppData({...appData, screenshots: [...appData.screenshots, newShotUrl]}); setNewShotUrl(""); }
            };

            const removeShot = (idx) => {
                const s = [...appData.screenshots];
                s.splice(idx, 1);
                setAppData({...appData, screenshots: s});
            };

            // APK Upload
            const handleFileChange = (e) => {
                if (e.target.files[0]) { setFile(e.target.files[0]); setStatus({ type: '', message: '' }); }
            };

            const publishToFirebase = async (downloadUrl) => {
                try {
                    setStatus({ type: 'info', message: 'Salvando no banco de dados da Loja...' });
                    
                    const payload = {
                        name: appData.name,
                        developer: appData.developer || 'Nexus',
                        version: appData.version || '1.0',
                        platform: appData.platform || 'Mobile',
                        icon: appData.icon || 'https://cdn-icons-png.flaticon.com/512/888/888859.png',
                        category: appData.category,
                        downloadUrl: downloadUrl,
                        description: appData.description || 'Disponível na Nexus Store.',
                        rating: '5.0',
                        lastUpdated: Date.now(),
                        screenshots: appData.screenshots.length > 0 ? appData.screenshots : [appData.icon || 'https://cdn-icons-png.flaticon.com/512/888/888859.png'], 
                        isMod: appData.isMod,
                        isLocked: appData.isLocked,
                        isSecret: appData.isSecret,
                        isHidden: appData.isHidden,
                        scheduledAt: appData.scheduledAt ? new Date(appData.scheduledAt).getTime() : null,
                        isVisibleBeforeLaunch: false,
                        hasWarning: false,
                        warningMessage: ''
                    };

                    await db.collection('artifacts').doc(DB_APP_ID).collection('public').doc('data').collection('apps').add(payload);
                    setStatus({ type: 'success', message: '✨ Publicado! O App já está disponível na Nexus.' });
                    
                    // Reset
                    setFile(null);
                    setAppData({ name: '', developer: '', category: 'Apps', version: '1.0', platform: 'Mobile', description: '', icon: '', screenshots: [], scheduledAt: '', isMod: false, isSecret: false, isHidden: false, isLocked: false });
                } catch (error) {
                    setStatus({ type: 'error', message: 'Erro ao salvar no banco de dados: ' + error.message });
                }
            };

            const handleUploadAndPublish = () => {
                if (!cloudName || !uploadPreset) return setStatus({ type: 'error', message: "Abra as configurações e defina o Cloud Name e Upload Preset." });
                if (!appData.name) return setStatus({ type: 'error', message: "O App precisa de um nome." });
                if (!file) return setStatus({ type: 'error', message: "Anexe o arquivo APK do App." });

                setUploading(true);
                setProgress(0);
                setStatus({ type: 'info', message: 'Enviando APK para a nuvem...' });

                const formData = new FormData();
                formData.append('file', file);
                formData.append('upload_preset', uploadPreset);

                const url = `https://api.cloudinary.com/v1_1/${cloudName}/raw/upload`;
                const xhr = new XMLHttpRequest();
                xhr.open('POST', url, true);

                xhr.upload.onprogress = (e) => {
                    if (e.lengthComputable) setProgress(Math.round((e.loaded / e.total) * 100));
                };

                xhr.onload = () => {
                    if (xhr.status === 200) {
                        const response = JSON.parse(xhr.responseText);
                        publishToFirebase(response.secure_url);
                    } else {
                        const err = JSON.parse(xhr.responseText);
                        setStatus({ type: 'error', message: err.error?.message || "Erro no Cloudinary. Verifique o Upload Preset." });
                        setUploading(false);
                    }
                };
                
                xhr.onerror = () => { 
                    setStatus({ type: 'error', message: "Erro de conexão. Verifique se o Cloud Name está correto ou se há um bloqueador de anúncios ativo." }); 
                    setUploading(false); 
                };
                
                xhr.send(formData);
            };

            return (
                <div className="view-animate min-h-screen bg-black flex justify-center pb-20">
                    <div className="w-full max-w-2xl px-6 pt-16">
                        
                        <header className="flex justify-between items-center mb-10">
                            <div className="flex items-center gap-4 animate-float">
                                <div className="w-14 h-14 bg-[#1c1c1e] rounded-[22px] border border-white/5 flex items-center justify-center shadow-2xl">
                                    <Icon name="UploadCloud" className="text-blue-500" size={28} />
                                </div>
                                <div>
                                    <p className="text-[10px] font-bold text-zinc-500 uppercase tracking-widest mb-1">Nexus Publisher</p>
                                    <h1 className="text-3xl font-black text-white tracking-tighter leading-none">Publicar</h1>
                                </div>
                            </div>
                            <button onClick={() => setIsConfigOpen(!isConfigOpen)} className="w-10 h-10 rounded-full bg-[#1c1c1e] flex items-center justify-center btn-fluid border border-white/5">
                                <Icon name="Settings" size={18} className={isConfigOpen ? "text-blue-500" : "text-zinc-400"} />
                            </button>
                        </header>

                        {/* CONFIG CLOUDINARY */}
                        {isConfigOpen && (
                            <div className="mb-8 p-6 onyx-card rounded-[32px] animate-spring">
                                <h3 className="text-sm font-bold text-white mb-4 flex items-center gap-2"><Icon name="Cloud" size={18} className="text-blue-500"/> Integração Cloudinary</h3>
                                <div className="space-y-4">
                                    <InputField label="Cloud Name *" placeholder="Ex: dad93q3f0" value={cloudName} onChange={setCloudName} />
                                    <InputField label="Upload Preset (Unsigned) *" placeholder="Ex: nexus_uploads" value={uploadPreset} onChange={setUploadPreset} />
                                    <button onClick={handleSaveConfig} className="w-full py-4 bg-white/10 hover:bg-white/20 text-white rounded-2xl font-bold text-sm btn-fluid">Salvar Configuração</button>
                                </div>
                            </div>
                        )}

                        {/* SESSÃO 1: INFORMAÇÕES BÁSICAS */}
                        <div className="animate-spring" style={{animationDelay: '0.1s'}}>
                            <div className="flex items-center gap-3 mb-4 px-2">
                                <span className="w-6 h-6 rounded-full bg-blue-600 text-white flex items-center justify-center text-xs font-bold">1</span>
                                <h2 className="text-lg font-bold text-white tracking-tight">Informações Básicas</h2>
                            </div>
                            <div className="onyx-card p-6 rounded-[32px] mb-8 space-y-4">
                                <InputField label="Título do Aplicativo *" placeholder="Ex: WhatsApp Pro" value={appData.name} onChange={v => setAppData({...appData, name: v})} />
                                <InputField label="Desenvolvedor" placeholder="Ex: Meta" value={appData.developer} onChange={v => setAppData({...appData, developer: v})} />
                                <div className="grid grid-cols-2 gap-4">
                                    <InputField label="Versão" placeholder="Ex: 1.0" value={appData.version} onChange={v => setAppData({...appData, version: v})} />
                                    <InputField label="Plataforma" placeholder="Ex: Mobile" value={appData.platform} onChange={v => setAppData({...appData, platform: v})} />
                                </div>
                                <div className="nexus-input-container">
                                    <label className="nexus-label">Categoria</label>
                                    <select className="nexus-input appearance-none" value={appData.category} onChange={e => setAppData({...appData, category: e.target.value})}>
                                        {['Apps', 'Jogos', 'PC', 'Streaming', 'Utilitários', 'Rede Sociais'].map(c => <option key={c} value={c}>{c}</option>)}
                                    </select>
                                </div>
                                <InputField label="Descrição Completa" placeholder="Sobre o aplicativo..." isTextarea={true} value={appData.description} onChange={v => setAppData({...appData, description: v})} />
                                
                                <div className="flex justify-between items-center bg-[#1c1c1e] p-5 rounded-[24px] border border-white/5">
                                    <div>
                                        <span className="text-sm font-bold text-white block">Selo Mod / Hack</span>
                                        <span className="text-[10px] text-zinc-500 font-bold uppercase mt-1 block">Exibe um badge dourado</span>
                                    </div>
                                    <IOSSwitch checked={appData.isMod} onChange={v => setAppData({...appData, isMod: v})} />
                                </div>
                            </div>
                        </div>

                        {/* SESSÃO 2: MÍDIA (ÍCONE E SCREENSHOTS) */}
                        <div className="animate-spring" style={{animationDelay: '0.2s'}}>
                            <div className="flex items-center gap-3 mb-4 px-2">
                                <span className="w-6 h-6 rounded-full bg-blue-600 text-white flex items-center justify-center text-xs font-bold">2</span>
                                <h2 className="text-lg font-bold text-white tracking-tight">Visual e Mídia</h2>
                            </div>
                            <div className="onyx-card p-6 rounded-[32px] mb-8">
                                {/* Ícone */}
                                <div className="mb-8 border-b border-zinc-800 pb-8">
                                    <label className="nexus-label mb-4">Ícone do App</label>
                                    <div className="flex gap-4 items-center">
                                        <div className="w-20 h-20 rounded-[22%] bg-[#1c1c1e] border border-white/5 flex shrink-0 overflow-hidden relative group">
                                            {appData.icon ? <img src={appData.icon} className="w-full h-full object-cover" /> : <Icon name="Image" className="m-auto text-zinc-500" size={24}/>}
                                        </div>
                                        <div className="flex-1 space-y-2">
                                            <input type="text" placeholder="URL da Imagem" className="w-full bg-[#1c1c1e] rounded-xl px-4 py-3 text-sm text-white outline-none border border-transparent focus:border-blue-500" value={appData.icon} onChange={e => setAppData({...appData, icon: e.target.value})} />
                                            <label className="w-full bg-zinc-800 hover:bg-zinc-700 text-white rounded-xl px-4 py-3 text-xs font-bold text-center block cursor-pointer transition-colors">
                                                Ou Fazer Upload do PC/Celular
                                                <input type="file" accept="image/*" className="hidden" onChange={handleIconUpload} />
                                            </label>
                                        </div>
                                    </div>
                                </div>

                                {/* Screenshots */}
                                <div>
                                    <label className="nexus-label mb-4">Screenshots</label>
                                    <div className="flex gap-2 mb-4">
                                        <input type="text" placeholder="URL da Screenshot" className="flex-1 bg-[#1c1c1e] rounded-xl px-4 py-3 text-sm text-white outline-none" value={newShotUrl} onChange={e => setNewShotUrl(e.target.value)} />
                                        <button onClick={addShotUrl} className="bg-blue-600 px-4 rounded-xl text-white font-bold active:scale-95 transition-transform">Add</button>
                                        <label className="bg-zinc-800 px-4 flex items-center justify-center rounded-xl text-white cursor-pointer active:scale-95 transition-transform" title="Fazer Upload">
                                            <Icon name="Upload" size={18} />
                                            <input type="file" accept="image/*" className="hidden" onChange={handleScreenshotUpload} />
                                        </label>
                                    </div>
                                    <div className="flex gap-3 overflow-x-auto pb-2 no-scrollbar">
                                        {appData.screenshots.map((url, i) => (
                                            <div key={i} className="relative shrink-0 w-24 h-40 bg-[#1c1c1e] rounded-[20px] overflow-hidden border border-white/5">
                                                <img src={url} className="w-full h-full object-cover" />
                                                <button onClick={() => removeShot(i)} className="absolute top-2 right-2 w-6 h-6 bg-red-600/80 backdrop-blur-md rounded-full flex items-center justify-center text-white"><Icon name="X" size={12} /></button>
                                            </div>
                                        ))}
                                        {appData.screenshots.length === 0 && (
                                            <div className="w-full py-8 text-center border-2 border-dashed border-zinc-800 rounded-[20px] text-zinc-500 text-xs font-bold">Nenhuma screenshot adicionada</div>
                                        )}
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* SESSÃO 3: AGENDAMENTO E STATUS */}
                        <div className="animate-spring" style={{animationDelay: '0.3s'}}>
                            <div className="flex items-center gap-3 mb-4 px-2">
                                <span className="w-6 h-6 rounded-full bg-blue-600 text-white flex items-center justify-center text-xs font-bold">3</span>
                                <h2 className="text-lg font-bold text-white tracking-tight">Status de Lançamento</h2>
                            </div>
                            <div className="onyx-card p-6 rounded-[32px] mb-8 space-y-4">
                                <InputField label="Agendar Lançamento (Deixe em branco p/ lançar já)" type="datetime-local" value={appData.scheduledAt} onChange={v => setAppData({...appData, scheduledAt: v})} />
                                
                                <div className="grid grid-cols-1 sm:grid-cols-2 gap-4 pt-2">
                                    <div className="flex justify-between items-center bg-[#1c1c1e] p-4 rounded-[20px] border border-white/5">
                                        <div>
                                            <span className="text-[12px] font-bold text-white block">Confidencial/Surpresa</span>
                                            <span className="text-[9px] text-zinc-500 font-bold uppercase mt-1 block">Aparece com ícone "?"</span>
                                        </div>
                                        <IOSSwitch checked={appData.isSecret || appData.isLocked} onChange={v => setAppData({...appData, isSecret: v, isLocked: v})} />
                                    </div>
                                    <div className="flex justify-between items-center bg-[#1c1c1e] p-4 rounded-[20px] border border-white/5">
                                        <div>
                                            <span className="text-[12px] font-bold text-white block">Modo Oculto</span>
                                            <span className="text-[9px] text-zinc-500 font-bold uppercase mt-1 block">Invisível até o lançamento</span>
                                        </div>
                                        <IOSSwitch checked={appData.isHidden} onChange={v => setAppData({...appData, isHidden: v})} />
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* SESSÃO 4: ARQUIVO APK E PUBLICAR */}
                        <div className="animate-spring" style={{animationDelay: '0.4s'}}>
                            <div className="flex items-center gap-3 mb-4 px-2">
                                <span className="w-6 h-6 rounded-full bg-blue-600 text-white flex items-center justify-center text-xs font-bold">4</span>
                                <h2 className="text-lg font-bold text-white tracking-tight">Arquivo & Publicar</h2>
                            </div>

                            <label className={`relative flex flex-col items-center justify-center w-full h-40 border-2 border-dashed rounded-[32px] cursor-pointer transition-all duration-300 mb-6 onyx-card btn-fluid ${file ? 'border-blue-500 bg-blue-500/5' : 'border-zinc-800 hover:border-zinc-600'}`}>
                                <div className="flex flex-col items-center justify-center pt-5 pb-6 text-center px-4">
                                    <div className={`w-12 h-12 rounded-full flex items-center justify-center mb-3 transition-colors ${file ? 'bg-blue-600' : 'bg-zinc-800'}`}>
                                        <Icon name={file ? "Check" : "FilePlus"} className="text-white" size={20} />
                                    </div>
                                    <p className="text-sm font-bold text-white mb-1">{file ? 'Arquivo APK Anexado' : 'Tocar para escolher arquivo APK'}</p>
                                    <p className="text-xs font-bold text-zinc-500 truncate max-w-[280px]">
                                        {file ? file.name : 'Subirá direto para o seu Cloudinary'}
                                    </p>
                                </div>
                                <input type="file" accept=".apk" className="hidden" onChange={handleFileChange} />
                            </label>

                            {/* Status Messages */}
                            {status.message && (
                                <div className={`p-5 mb-6 rounded-[24px] text-sm font-bold border flex items-center gap-3 animate-spring ${status.type === 'error' ? 'bg-red-500/10 border-red-500/20 text-red-400' : status.type === 'success' ? 'bg-green-500/10 border-green-500/20 text-green-400' : 'bg-blue-500/10 border-blue-500/20 text-blue-400'}`}>
                                    <Icon name={status.type === 'error' ? 'AlertTriangle' : status.type === 'success' ? 'CheckCircle2' : 'Info'} size={20} />
                                    {status.message}
                                </div>
                            )}

                            {/* Botão Final */}
                            {uploading ? (
                                <div className="onyx-card p-6 rounded-[32px]">
                                    <div className="flex justify-between text-[10px] font-bold uppercase tracking-widest text-zinc-400 mb-3">
                                        <span>{progress === 100 ? 'Finalizando...' : 'Enviando APK para a Nuvem'}</span>
                                        <span className="text-blue-500">{progress}%</span>
                                    </div>
                                    <div className="w-full bg-[#1c1c1e] rounded-full h-4 overflow-hidden shadow-inner">
                                        <div className="bg-blue-600 h-full rounded-full transition-all duration-300 relative overflow-hidden" style={{ width: `${progress}%` }}>
                                            <div className="absolute inset-0 bg-white/20" style={{ animation: 'floatBot 1s infinite linear' }}></div>
                                        </div>
                                    </div>
                                </div>
                            ) : (
                                <button 
                                    onClick={handleUploadAndPublish} 
                                    disabled={!file || !appData.name || !uploadPreset || !cloudName}
                                    className={`w-full py-5 rounded-full font-black text-sm uppercase tracking-wider shadow-[0_10px_30px_rgba(37,99,235,0.3)] flex items-center justify-center gap-2 btn-fluid ${file && appData.name && uploadPreset && cloudName ? 'bg-blue-600 text-white' : 'bg-zinc-900 text-zinc-600 shadow-none border border-zinc-800 cursor-not-allowed'}`}
                                >
                                    <Icon name="UploadCloud" size={20} /> 
                                    Subir Arquivo & Publicar
                                </button>
                            )}
                        </div>

                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
